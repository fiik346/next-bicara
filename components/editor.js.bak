import { createReactEditorJS } from 'react-editor-js'
import React from 'react'
import Quote from '@editorjs/quote'
import Embed from '@editorjs/embed'
import List from '@editorjs/list'
import Table from '@editorjs/table'
import Link from '@editorjs/link'
import Marker from '@editorjs/marker'
const CodeBox = require('@bomdi/codebox')
import Underline from '@editorjs/underline'
const Header = require('@editorjs/header')

export default function Editor(props) {
	const Editor = createReactEditorJS()
	const editorTools = {
		header: {
			class: Header,
			config: {
				defaultLevel: 2,
			}
		},
		list: List,
		quote: Quote,
		table: Table,
		link: Link,
		underline: Underline,
		marker: Marker,
		codeBox: {
      class: CodeBox,
      config: {
				themeURL: 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/dracula.min.css',
				themeName: 'atom-one-dark',
				useDefaultTheme: 'light not-prose'
      }
		},
	}
	
	const defaultValue= null
	const editorCore = React.useRef(null)

	const handleInitialize = React.useCallback((instance) => {
  	editorCore.current = instance
	}, [])

	const handleSave = React.useCallback(async () => {
  const savedData = await editorCore.current.save();
	}, [])
	
	return(
		<>
			<input type="text" placeholder="Judul Postingan" className="px-4 py-2 mb-4 border focus:border-blue-600 focus:outline-none w-full" />
			<Editor onInitialize={handleInitialize} holder="editorjs" tools={editorTools} defaultValue={defaultValue}>
				<div id="editorjs" className="p-4 container mx-auto border min-h-[80vh] prose mx-auto focus-within:border-blue-600"></div>
			</Editor>

		<button onClick={handleSave}>Save</button>
		<pre className="hidden">{JSON.stringify(editorCore)}</pre>
		</>
	)
}
